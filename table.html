<!DOCTYPE html>
<html>
    <head>
        <link type="text/css" rel="stylesheet" href="styles/table.css">
    </head>
    <body onload="animate(step())">
        <canvas id="pongTable" width="600" height="400"></canvas>
        <script>
            var p_canvas = document.getElementById("pongTable");
            var p_context = p_canvas.getContext("2d");

            var animate = window.requestAnimationFrame || function(callback) { window.setTimeout(callback, 1000/60) };

            function step() {
                render_game();
                window.requestAnimationFrame(step);
            }

            function Player(x, y, width, height) {
                this.x_position = x;
                this.y_position = y;
                this.width = width;
                this.height = height;
                this.speed = 10;
                this.move_up = function() {
                    if (this.y_position == 0) {
                        this.y_position = 0;
                    } else {
                        p_context.clearRect(this.x_position, this.y_position, this.width, this.height);
                        this.y_position -= this.speed;
                    }  
                }
                this.move_down = function() {
                    if (this.y_position == (p_canvas.height - this.height)) {
                        this.y_position = (p_canvas.height - this.height);
                    } else {
                        p_context.clearRect(this.x_position, this.y_position, this.width, this.height);
                        this.y_position += this.speed;
                    }  
                }
                this.render = function() {
                     p_context.fillRect(this.x_position, this.y_position, this.width, this.height);
                }
            }
            function Computer(x, y, width, height) {
                this.x_position = x;
                this.y_position = y;
                this.width = width;
                this.height = height;
                this.render = function() {
                     p_context.fillRect(this.x_position, this.y_position, this.width, this.height);
                }
            }
            function Ball(x, y, radius) {
                this.x_position = x;
                this.y_position = y;
                this.radius = radius;
                this.start_angle = 0;
                this.end_angle = 2 * Math.PI;
                this.render = function() {
                    p_context.beginPath();
                    p_context.arc(this.x_position, this.y_position, this.radius, this.start_angle, this.end_angle, false);
                    p_context.fill();
                }
            }
            var left_paddle = new Player(25, 100, 25, 100);
            var right_paddle = new Computer(550, 100, 25, 100);
            var pong_ball = new Ball(300, 200, 15);
            var render_game = function() {
                left_paddle.render();
                right_paddle.render();
                pong_ball.render();
            }
            window.addEventListener('keydown', function(e) {
                if (e.keyCode == 38) {
                    left_paddle.move_up();
                }
                else if (e.keyCode == 40) {
                    left_paddle.move_down();
                }
            })
        </script>

    </body>
</html>